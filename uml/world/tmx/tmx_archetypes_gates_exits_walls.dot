digraph TmxArchetypesGatesExitsWalls {
  rankdir=LR;
  graph [fontname="Segoe UI", fontsize=11, labelloc=t,
    label="UML (Graphviz): TMX archetypes â€” gates/exits/walls" ];

  node [fontname="Segoe UI", fontsize=10, shape=plaintext];
  edge [fontname="Segoe UI", fontsize=9, color="#444444", arrowsize=0.8];

  GateEntity [label=<
    <TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6">
      <TR><TD ALIGN="CENTER"><B>&lt;&lt;archetype&gt;&gt;</B><BR/><B>Gate (Entity)</B></TD></TR>
      <TR><TD ALIGN="LEFT">TMX type=gate</TD></TR>
    </TABLE>
  >];

  ExitEntity [label=<
    <TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6">
      <TR><TD ALIGN="CENTER"><B>&lt;&lt;archetype&gt;&gt;</B><BR/><B>Exit (Entity)</B></TD></TR>
      <TR><TD ALIGN="LEFT">TMX type=exit</TD></TR>
    </TABLE>
  >];

  WallTileEntity [label=<
    <TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6">
      <TR><TD ALIGN="CENTER"><B>&lt;&lt;archetype&gt;&gt;</B><BR/><B>Wall tile (Entity)</B></TD></TR>
      <TR><TD ALIGN="LEFT">TMX tiles in walls layer</TD></TR>
    </TABLE>
  >];

  PositionComponent [label=<TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6"><TR><TD ALIGN="CENTER"><B>PositionComponent</B></TD></TR></TABLE>>];
  CollisionComponent [label=<TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6"><TR><TD ALIGN="CENTER"><B>CollisionComponent</B></TD></TR></TABLE>>];
  RenderableComponent [label=<TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6"><TR><TD ALIGN="CENTER"><B>RenderableComponent</B></TD></TR></TABLE>>];

  WallComponent [label=<TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6"><TR><TD ALIGN="CENTER"><B>WallComponent</B></TD></TR></TABLE>>];
  GateWallComponent [label=<TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6"><TR><TD ALIGN="CENTER"><B>GateWallComponent</B></TD></TR></TABLE>>];
  GateComponent [label=<TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6"><TR><TD ALIGN="CENTER"><B>GateComponent</B></TD></TR></TABLE>>];
  GateDoorComponent [label=<TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6"><TR><TD ALIGN="CENTER"><B>GateDoorComponent</B></TD></TR></TABLE>>];
  ExitComponent [label=<TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6"><TR><TD ALIGN="CENTER"><B>ExitComponent</B></TD></TR></TABLE>>];

  GateSystem [label=<TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6"><TR><TD ALIGN="CENTER"><B>GateSystem</B></TD></TR></TABLE>>];
  PortalConfig [label=<TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6"><TR><TD ALIGN="CENTER"><B>PortalConfig</B></TD></TR></TABLE>>];
  GameConstants [label=<TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="6"><TR><TD ALIGN="CENTER"><B>GameConstants</B></TD></TR></TABLE>>];

  // Ownership
  GateEntity -> PositionComponent [dir="both", arrowtail="diamond", arrowhead="none", style="solid", label="has"];
  GateEntity -> CollisionComponent [dir="both", arrowtail="diamond", arrowhead="none", style="solid", label="has"];
  GateEntity -> WallComponent [dir="both", arrowtail="diamond", arrowhead="none", style="solid", label="blocks"];
  GateEntity -> GateComponent [dir="both", arrowtail="diamond", arrowhead="none", style="solid", label="has"];
  GateEntity -> GateDoorComponent [style="dashed", arrowhead="vee", label="optional (group trigger)"];

  ExitEntity -> PositionComponent [dir="both", arrowtail="diamond", arrowhead="none", style="solid", label="has"];
  ExitEntity -> CollisionComponent [dir="both", arrowtail="diamond", arrowhead="none", style="solid", label="has"];
  ExitEntity -> RenderableComponent [dir="both", arrowtail="diamond", arrowhead="none", style="solid", label="has"];
  ExitEntity -> ExitComponent [dir="both", arrowtail="diamond", arrowhead="none", style="solid", label="has"];

  WallTileEntity -> PositionComponent [dir="both", arrowtail="diamond", arrowhead="none", style="solid", label="has"];
  WallTileEntity -> CollisionComponent [dir="both", arrowtail="diamond", arrowhead="none", style="solid", label="has"];
  WallTileEntity -> WallComponent [dir="both", arrowtail="diamond", arrowhead="none", style="solid", label="has"];
  WallTileEntity -> GateWallComponent [style="dashed", arrowhead="vee", label="if tileId==GATE_TILE_ID"];

  // Influences
  ExitEntity -> PortalConfig [style="dashed", arrowhead="vee", label="may hide legacy exits"];
  GateEntity -> GateSystem [style="dashed", arrowhead="vee", label="arena tracking (elsewhere)"];
  WallTileEntity -> GameConstants [style="dashed", arrowhead="vee", label="TILE_SIZE/GATE_TILE_ID"];
}
